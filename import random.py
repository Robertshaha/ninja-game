import random

class NinjaGame:
    def __init__(self):
        self.уровень = 1
        self.инвентарь = []
        self.противники = {
            "Самурай": 20, 
            "Шиноби": 15, 
            "Демон": 30
        }
        self.задания = {
            1: "Соберите 3 ключа, чтобы открыть скрытую дверь.",
            2: "Победите самурая и получите амулет.",
            3: "Избегите демона и найдите свиток мудрости."
        }
        self.ключи = set()
        self.враг = None
        self.состояние_игры = True
        self.статы = {
            "здоровье": 100,
            "атака": 10
        }

    def начать_игру(self):
        print("Добро пожаловать в NinjaGame! На дворе 1850-ый год, вы являетесь личным ниндзей сегуната в провинции Вано, и он дал вам новое поручение. Спешите обрадовать своего сегуна и заполучите дрогоценный амулет!")
        while self.состояние_игры and self.уровень <= 3:
            print(f"\\n--- Уровень {self.уровень} ---")
            self.уровень_игры(self.уровень)
            if self.уровень < 3:
                continue_choice = input("Хотите продолжить к следующему уровню? (да/нет): ").lower()
                if continue_choice != "да":
                    print("Вы решили выйти из игры.")
                    break
            self.уровень += 1
        print("Спасибо за игру. Вы завершили все уровни!")

    def уровень_игры(self, уровень):
        if уровень == 1:
            self.уровень_1()
        elif уровень == 2:
            self.уровень_2()
        elif уровень == 3:
            self.уровень_3()

    def уровень_1(self):
        print(self.задания[1])
        while len(self.ключи) < 3:
            действие = input("Что делать? (взять ключ/посмотреть инвентарь/проверить ключи): ").lower()
            if действие == "взять ключ":
                ключ = f"Ключ{len(self.ключи) + 1}"
                self.ключи.add(ключ)
                print(f"Вы взяли {ключ}.")
            elif действие == "посмотреть инвентарь":
                self.вывести_инвентарь()
            elif действие == "проверить ключи":
                print(f"У вас {len(self.ключи)} ключа(ей) из 3.")
                if len(self.ключи) == 3:
                    print("Вы собрали все ключи и открыли скрытую дверь на следующий уровень!")
                    break
            else:
                print("Неверное действие.")

    def уровень_2(self):
        self.враг = "Самурай"
        print(f"Вы встретили {self.враг} с {self.противники[self.враг]} HP!")
        while self.противники[self.враг] > 0:
            действие = input("Что делать? (атаковать/убежать/посмотреть инвентарь): ").lower()
            if действие == "атаковать":
                урон = random.randint(5, 10)
                self.противники[self.враг] -= урон
                print(f"Вы атаковали {self.враг}. Урон: {урон}. Осталось HP: {self.противники[self.враг]}.")
                if self.противники[self.враг] <= 0:
                    print(f"Вы победили {self.враг}!")
                    print("Вы получили амулет!")
                    self.инвентарь.append("Амулет")
            elif действие == "убежать":
                print("Вы убежали из боя!")
                return
            elif действие == "посмотреть инвентарь":
                self.вывести_инвентарь()
            else:
                print("Неверное действие.")

    def уровень_3(self):
        self.враг = "Демон"
        print(self.задания[3])
        print(f"Вы встретили {self.враг} с {self.противники[self.враг]} HP!")
        while self.противники[self.враг] > 0:
            действие = input("Что делать? (избежать/атаковать/посмотреть инвентарь): ").lower()
            if действие == "атаковать":
                урон = random.randint(10, 20)
                self.противники[self.враг] -= урон
                print(f"Вы атаковали {self.враг}. Урон: {урон}. Осталось HP: {self.противники[self.враг]}.")
                if self.противники[self.враг] <= 0:
                    print("Вы победили демона и спасли мир!")
                    self.инвентарь.append("Святой Свиток")
                    break
            elif действие == "избежать":
                print("Вы решили избежать встречи с демоном!")
                break
            elif действие == "посмотреть инвентарь":
                self.вывести_инвентарь()
            else:
                print("Неверное действие.")

    def вывести_инвентарь(self):
        if self.инвентарь:
            print("Ваш инвентарь:")
            for предмет in self.инвентарь:
                print(f"- {предмет}")
        else:
            print("Ваш инвентарь пуст!")

    def получить_статистику(self):
        print("\\n--- Статистика ---")
        print(f"Уровень: {self.уровень}")
        print(f"Ключи: {len(self.ключи)} из 3")
        print(f"Здоровье: {self.статы['здоровье']}")
        print(f"Атака: {self.статы['атака']}")
        self.вывести_инвентарь()

if __name__ == "__main__":
    игра = NinjaGame()
    игра.начать_игру()